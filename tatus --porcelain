[1mdiff --git a/.env.example b/.env.example[m
[1mnew file mode 100644[m
[1mindex 0000000..323e149[m
[1m--- /dev/null[m
[1m+++ b/.env.example[m
[36m@@ -0,0 +1,16 @@[m
[32m+[m[32m# AI服务API密钥配置[m
[32m+[m[32m# 请复制此文件为 .env 并填入真实的API密钥[m
[32m+[m
[32m+[m[32m# DeepSeek API配置 (主要AI服务)[m
[32m+[m[32mDEEPSEEK_API_KEY=your_deepseek_api_key_here[m
[32m+[m
[32m+[m[32m# 通义千问API配置 (视频分析)[m
[32m+[m[32mQWEN_API_KEY=your_qwen_api_key_here[m
[32m+[m
[32m+[m[32m# 数据库配置[m
[32m+[m[32mDATABASE_URL=sqlite:///./eduagi.db[m
[32m+[m
[32m+[m[32m# JWT配置[m
[32m+[m[32mSECRET_KEY=your_secret_key_here[m
[32m+[m[32mALGORITHM=HS256[m
[32m+[m[32mACCESS_TOKEN_EXPIRE_MINUTES=30[m
[1mdiff --git a/API_CONFIG_GUIDE.md b/API_CONFIG_GUIDE.md[m
[1mnew file mode 100644[m
[1mindex 0000000..2d374df[m
[1m--- /dev/null[m
[1m+++ b/API_CONFIG_GUIDE.md[m
[36m@@ -0,0 +1,204 @@[m
[32m+[m[32m# AI API配置指南[m
[32m+[m
[32m+[m[32m## 问题诊断[m
[32m+[m
[32m+[m[32m您遇到的问题是：**AI服务没有配置真实的API密钥，导致系统一直在使用模拟回复**。[m
[32m+[m
[32m+[m[32m### 当前状态检查[m
[32m+[m
[32m+[m[32m从代码分析可以看出：[m
[32m+[m
[32m+[m[32m1. **AI服务配置位置**：`backend/services/ai_service.py`[m
[32m+[m[32m2. **API密钥检查**：第198行 `if not AIConfig.DEEPSEEK_API_KEY:`[m
[32m+[m[32m3. **回退机制**：当API密钥为空时，自动使用模拟回复[m
[32m+[m
[32m+[m[32m### 影响的功能[m
[32m+[m
[32m+[m[32m以下功能目前使用模拟回复，显得"弱智"：[m
[32m+[m
[32m+[m[32m- ✅ 智能聊天对话[m
[32m+[m[32m- ✅ 题目生成[m
[32m+[m[32m- ✅ 答案批改[m
[32m+[m[32m- ✅ 教学计划生成[m
[32m+[m[32m- ✅ 知识图谱生成[m
[32m+[m[32m- ✅ 考试题目生成[m
[32m+[m
[32m+[m[32m## 解决方案[m
[32m+[m
[32m+[m[32m### 步骤1：获取API密钥[m
[32m+[m
[32m+[m[32m#### DeepSeek API（主要AI功能）[m
[32m+[m[32m1. 访问：https://platform.deepseek.com/[m
[32m+[m[32m2. 注册账号并登录[m
[32m+[m[32m3. 进入API管理页面[m
[32m+[m[32m4. 创建新的API密钥[m
[32m+[m[32m5. 复制API密钥[m
[32m+[m
[32m+[m[32m#### 通义千问API（视频分析专用）[m
[32m+[m[32m1. 访问：https://dashscope.aliyun.com/[m
[32m+[m[32m2. 注册阿里云账号[m
[32m+[m[32m3. 开通通义千问服务[m
[32m+[m[32m4. 获取API密钥[m
[32m+[m
[32m+[m[32m### 步骤2：配置环境变量[m
[32m+[m
[32m+[m[32m#### 方法1：创建.env文件[m
[32m+[m[32m在`backend`目录下创建`.env`文件：[m
[32m+[m
[32m+[m[32m```bash[m
[32m+[m[32m# 数据库配置[m
[32m+[m[32mDATABASE_URL=sqlite:///./data/teaching.db[m
[32m+[m
[32m+[m[32m# JWT配置[m
[32m+[m[32mSECRET_KEY=your-secret-key-here-change-this-in-production[m
[32m+[m
[32m+[m[32m# AI API配置[m
[32m+[m[32mDEEPSEEK_API_KEY=sk-your-actual-deepseek-api-key-here[m
[32m+[m[32mQWEN_API_KEY=your-actual-qwen-api-key-here[m
[32m+[m
[32m+[m[32m# 七牛云配置（可选）[m
[32m+[m[32mQINIU_ACCESS_KEY=your-qiniu-access-key[m
[32m+[m[32mQINIU_SECRET_KEY=your-qiniu-secret-key[m
[32m+[m[32mQINIU_BUCKET_NAME=your-bucket-name[m
[32m+[m[32mQINIU_DOMAIN=your-domain.com[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m#### 方法2：设置系统环境变量[m
[32m+[m
[32m+[m[32m**Windows PowerShell:**[m
[32m+[m[32m```powershell[m
[32m+[m[32m$env:DEEPSEEK_API_KEY="sk-your-actual-deepseek-api-key-here"[m
[32m+[m[32m$env:QWEN_API_KEY="your-actual-qwen-api-key-here"[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m**Linux/Mac:**[m
[32m+[m[32m```bash[m
[32m+[m[32mexport DEEPSEEK_API_KEY="sk-your-actual-deepseek-api-key-here"[m
[32m+[m[32mexport QWEN_API_KEY="your-actual-qwen-api-key-here"[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### 步骤3：验证配置[m
[32m+[m
[32m+[m[32m创建一个测试脚本验证API配置：[m
[32m+[m
[32m+[m[32m```python[m
[32m+[m[32m# test_api.py[m
[32m+[m[32mimport os[m
[32m+[m[32mimport asyncio[m
[32m+[m[32mfrom backend.services.ai_service import AIService[m
[32m+[m
[32m+[m[32masync def test_api():[m
[32m+[m[32m    ai_service = AIService()[m
[32m+[m[41m    [m
[32m+[m[32m    # 测试简单对话[m
[32m+[m[32m    response = await ai_service.call_deepseek_api("请简单介绍一下Python")[m
[32m+[m[32m    print(f"模型: {response.model}")[m
[32m+[m[32m    print(f"内容: {response.content[:100]}...")[m
[32m+[m[41m    [m
[32m+[m[32m    if "mock" in response.model.lower():[m
[32m+[m[32m        print("❌ 仍在使用模拟回复")[m
[32m+[m[32m    else:[m
[32m+[m[32m        print("✅ 成功使用真实AI服务")[m
[32m+[m[41m    [m
[32m+[m[32m    await ai_service.close()[m
[32m+[m
[32m+[m[32mif __name__ == "__main__":[m
[32m+[m[32m    asyncio.run(test_api())[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m### 步骤4：重启应用[m
[32m+[m
[32m+[m[32m配置完成后，重启后端服务：[m
[32m+[m
[32m+[m[32m```bash[m
[32m+[m[32m# 停止当前服务[m
[32m+[m[32m# 重新启动[m
[32m+[m[32mpython backend/main.py[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m## 预期效果[m
[32m+[m
[32m+[m[32m配置真实API密钥后，您将看到：[m
[32m+[m
[32m+[m[32m### 智能聊天[m
[32m+[m[32m- 更自然、准确的回答[m
[32m+[m[32m- 能够理解上下文[m
[32m+[m[32m- 提供个性化的学习建议[m
[32m+[m
[32m+[m[32m### 题目生成[m
[32m+[m[32m- 多样化、有深度的题目[m
[32m+[m[32m- 符合教学目标的题目设计[m
[32m+[m[32m- 详细的解题思路和答案[m
[32m+[m
[32m+[m[32m### 答案批改[m
[32m+[m[32m- 智能化的评分标准[m
[32m+[m[32m- 详细的反馈和建议[m
[32m+[m[32m- 个性化的学习指导[m
[32m+[m
[32m+[m[32m### 教学功能[m
[32m+[m[32m- 专业的教学计划设计[m
[32m+[m[32m- 完整的知识图谱[m
[32m+[m[32m- 针对性的考试题目[m
[32m+[m
[32m+[m[32m## 成本说明[m
[32m+[m
[32m+[m[32m### DeepSeek API定价[m
[32m+[m[32m- 基础模型：约$0.002/1K tokens[m
[32m+[m[32m- 高级模型：约$0.006/1K tokens[m
[32m+[m[32m- 典型对话成本：$0.01-0.05/次[m
[32m+[m
[32m+[m[32m### 通义千问API定价[m
[32m+[m[32m- 基础模型：约¥0.002/1K tokens[m
[32m+[m[32m- 高级模型：约¥0.006/1K tokens[m
[32m+[m
[32m+[m[32m## 故障排除[m
[32m+[m
[32m+[m[32m### 常见问题[m
[32m+[m
[32m+[m[32m1. **API密钥无效**[m
[32m+[m[32m   - 检查密钥格式是否正确[m
[32m+[m[32m   - 确认密钥是否已激活[m
[32m+[m[32m   - 验证账户余额[m
[32m+[m
[32m+[m[32m2. **网络连接问题**[m
[32m+[m[32m   - 检查网络连接[m
[32m+[m[32m   - 确认防火墙设置[m
[32m+[m[32m   - 尝试使用代理[m
[32m+[m
[32m+[m[32m3. **配额限制**[m
[32m+[m[32m   - 检查API使用配额[m
[32m+[m[32m   - 确认账户余额[m
[32m+[m[32m   - 考虑升级套餐[m
[32m+[m
[32m+[m[32m### 调试命令[m
[32m+[m
[32m+[m[32m```python[m
[32m+[m[32m# 检查环境变量[m
[32m+[m[32mimport os[m
[32m+[m[32mprint(f"DEEPSEEK_API_KEY: {os.getenv('DEEPSEEK_API_KEY', '未设置')}")[m
[32m+[m
[32m+[m[32m# 测试API连接[m
[32m+[m[32mimport httpx[m
[32m+[m[32masync def test_connection():[m
[32m+[m[32m    async with httpx.AsyncClient() as client:[m
[32m+[m[32m        response = await client.get("https://api.deepseek.com/v1/models")[m
[32m+[m[32m        print(f"状态码: {response.status_code}")[m
[32m+[m[32m```[m
[32m+[m
[32m+[m[32m## 安全提醒[m
[32m+[m
[32m+[m[32m1. **不要提交API密钥到版本控制**[m
[32m+[m[32m   - 确保.env文件在.gitignore中[m
[32m+[m[32m   - 使用环境变量而不是硬编码[m
[